控制器出厂测试
===============

升级
--------
    #. 生产中的最新版本 -> 出厂版本。测试出厂版本对低版本的升级兼容。
    #. 出厂版本 -> 出厂版本。 自循环测试，目的测试未来给出厂版本再次升级是否存在问题。
    #. 平台下发升级，成功后控制器的ap不启动， 10分钟内控制器的版本状态为"未确认"。
    #. 本地升级，成功后控制器的ap自启动,10分钟内控制器的版本状态为"未确认"。
    #. 目标控制器当前版本 < 01_34的，平台下发升级且成功后，控制器的ap 将自动打开。为实现便于出厂升级使用。

通信
--------
    * 4G通信
        SIM卡，热插拔后，能够在30秒内完成网络连接 (4G信号良好时)。

子设备发现
------------
    #. 控制器自动发现、新增可用子设备。

        * 能够自动添加子设备 环境温度、回风温度、采集器。
        * 发现结束后，10分钟内平台可查所有新增子设备在线、数据有更新。

    #. 发现设备全程，不发生重启。
    #. 控制器直连的人体、温度传感器，其sn与测试环境一致，pid 恒等于0, sId恒大于0。
    #. 采集器及其直连温度传感器，其sn与测试环境一致。

        * 采集器 pId恒等于0, sId 恒大于0.
        * 温度传感器 pId恒大于0且等于其直连采集器的sId, sId恒大于0.
    #. 所有子设备的sId不重复。

子设备数据备份与恢复
----------------------
    #. 子设备数据自动备份，服务器中备份的信息与控制器中设备信息一致。
    #. 删除控制器所有子设备，再次与平台通信成功后，控制器将自动恢复子设备信息。

异常恢复
------------
    #. 任务看门狗被触发，10分钟后系统重启
    #. 平台入网失败，超时重启
    #. mqtt 连接断开，超时重启

平台下发配置
------------
    #. 平台下发lua文件，本地成功接收指令、成功下载、成功持久化。
    #. 

满载设备-稳定性
--------------
    控制器满载设备后，LTE运行稳定性。3x24小时不重启。

